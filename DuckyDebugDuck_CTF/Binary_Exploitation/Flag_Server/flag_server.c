#include <stdio.h>
#include <unistd.h>
#include "flag.h"

int get_credentials();
int authenticate_with_server(int *authenticated);
void print_flag();

extern char flag[100];

#define USERNAME_LENGTH 32
#define PASSWORD_LENGTH 64


int main() {
    int authenticated = 0;
    char username[USERNAME_LENGTH] = {0};
    char password[PASSWORD_LENGTH] = {0};

    printf("Hello and thank you for using Flag Distibuter v1.0 ðŸš©ðŸš©ðŸš©\n");

    printf("To receive the flag, please enter your username and password\n");
    printf("Username: ");
    fflush(stdout);
    	read(STDIN_FILENO, username, PASSWORD_LENGTH);
    printf("Password: ");
    fflush(stdout);
    read(STDIN_FILENO, password, PASSWORD_LENGTH);
    printf("Autenticating...\n");

    authenticate_with_server(&authenticated);

    if(authenticated)
        print_flag();
    else
        printf("Could not authenticate using these username and password\n");
        
    return 0;
}


void print_flag() {
	printf("Authenticated, here's the flag: %s\n", flag);
}

int authenticate_with_server(int *authenticated) {
    /*TODO: add authentication with server*/
    sleep(1);
    return 0;
}
